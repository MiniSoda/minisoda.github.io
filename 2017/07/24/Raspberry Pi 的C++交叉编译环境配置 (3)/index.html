<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Raspberry Pi 的C++交叉编译环境配置 (3) | MiniSoda 的博客</title>
  <meta name="author" content="George Zheng">

  
  <meta name="description" content="上一节我们把交叉编译的环境配置好了，但是作为开发过程来讲尤其是从被Visual Studio开发环境懒惯了的人来讲，用编辑器开发用命令编译工作效率还是太低。幸好M$在15年推出了 visual studio code ，本质上讲它只是一款编辑器，但是配合上插件和配置脚本后可以让Linux开发和在Wi">
  
  

  <link rel="alternate" href="/atom.xml" title="MiniSoda 的博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-103184815-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class="inner"><nav>
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>
  <div id="content" class="inner"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title">Raspberry Pi 的C++交叉编译环境配置 (3)</h1>
  

    <time datetime="2017-07-24T14:20:05.000Z">
  <span class="day">24</span><span class="month">Jul</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>上一节我们把交叉编译的环境配置好了，但是作为开发过程来讲尤其是从被Visual Studio开发环境懒惯了的人来讲，用编辑器开发用命令编译工作效率还是太低。幸好M$在15年推出了 <a href="https://code.visualstudio.com/#alt-downloads" target="_blank" rel="external">visual studio code</a> ，本质上讲它只是一款编辑器，但是配合上插件和配置脚本后可以让Linux开发和在Windows上的体验几乎一致。</p>
<p>一个vscode管理的项目大致包含一下结构</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-configure.jpg" alt="vscode-configure"></p>
<table>
<thead>
<tr>
<th style="text-align:left">组成</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">extension</td>
<td>插件，用来添加相应语言的功能</td>
</tr>
<tr>
<td style="text-align:left">makefile</td>
<td>编译管理工具</td>
</tr>
<tr>
<td style="text-align:left">cpp source</td>
<td>源文件</td>
</tr>
<tr>
<td style="text-align:left">task.json</td>
<td>vscode 的任务管理</td>
</tr>
<tr>
<td style="text-align:left">launch.json</td>
<td>调试配置管理</td>
</tr>
<tr>
<td style="text-align:left">keyborad.json</td>
<td>快捷键</td>
</tr>
</tbody>
</table>
<p>到vscode官网下载Ubuntu适用的最新安装包</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode.jpg" alt="vscode"></p>
<p>在Ubuntu上安装后打开，界面是这样的</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-look.jpg" alt="vscode-look"></p>
<p>vscode 是以目录为项目管理单位的，点击 open folder 来打开一个目录，如果没有的话就新建一个。</p>
<p>首先安装插件：</p>
<p>启动 VS Code 快速打开功能 <code>Ctrl+P</code>, 粘贴命令并回车.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ext install cpptools</div></pre></td></tr></table></figure>
<p>cpptools是用来编辑C++代码的插件，提供代码格式化、函数补完、调试等功能。具体参见<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools" target="_blank" rel="external">这里</a></p>
<p>插件安装完成后，用新建文件的方式创建代码，我写了一些测试代码可以点击创建后把下面这些代码粘上去。</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-newfile.jpg" alt="点击这个按钮新建文件"></p>
<ul>
<li><p>Makefile - makefile是Unix下常用的管理工程的工具，点击<a href="http://makefiletutorial.com/" target="_blank" rel="external">这里</a>有比较详细的教程</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">objects = test.o list.o</div><div class="line">ver = </div><div class="line">CC=arm-linux-gnueabihf-gcc</div><div class="line">CXX=arm-linux-gnueabihf-g++</div><div class="line"></div><div class="line"><span class="keyword">ifeq</span> (<span class="variable">$(ver)</span>, debug)</div><div class="line">CXXFLAGS = -c -Wall -g -Ddebug -pthread -std=c++11 -I~/raspberrypi/rootfs/usr/<span class="keyword">include</span> -L~/raspberrypi/rootfs/lib/arm-linux-gnueabihf</div><div class="line">filename = testapp_d</div><div class="line"><span class="keyword">else</span></div><div class="line">CXXFLAGS = -c -Wall -O3 -pthread -std=c++11 -I~/raspberrypi/rootfs/usr/<span class="keyword">include</span> -L~/raspberrypi/rootfs/lib/arm-linux-gnueabihf</div><div class="line">filename = testapp</div><div class="line"><span class="keyword">endif</span></div><div class="line"></div><div class="line">all : <span class="variable">$(objects)</span></div><div class="line">	<span class="variable">$(CXX)</span> -Wall -pthread -std=c++11 -o <span class="variable">$(filename)</span> <span class="variable">$^</span></div><div class="line"></div><div class="line"><span class="section">debug: <span class="variable">$(objects)</span></span></div><div class="line">	<span class="variable">$(CXX)</span> -g -Wall -pthread -std=c++11 -o <span class="variable">$(filename)</span> <span class="variable">$^</span></div><div class="line"></div><div class="line">test.o : test.cpp </div><div class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span></div><div class="line"></div><div class="line"><span class="section">list.o: list.cpp</span></div><div class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span></div><div class="line"></div><div class="line">clean :</div><div class="line">	rm -f <span class="variable">$(filename)</span> <span class="variable">$(filename)</span>_d *.o</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>list.h</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LIST_H</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LIST_H</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printWelcome</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">my_thread</span><span class="params">()</span></span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>list.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"list.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printWelcome</span><span class="params">( )</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"Welcome"</span>&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">my_thread</span><span class="params">()</span>  </span></div><div class="line">&#123;  </div><div class="line">    <span class="built_in">puts</span>(<span class="string">"hello, thread!"</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>test.cpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;thread&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"list.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="function">thread <span class="title">t</span><span class="params">( []()</span></span>&#123; <span class="built_in">puts</span>(<span class="string">"Hello, Lambda thread!"</span>);  &#125;);  </div><div class="line">    <span class="built_in">string</span> strInfo = <span class="string">""</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Hello Test!"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    printWelcome();</div><div class="line">    <span class="keyword">float</span> szChara = <span class="number">8.0</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>;i++)</div><div class="line">    &#123;</div><div class="line">        sum+=i;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(szChara);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt; <span class="string">"size of char: "</span>&lt;&lt; size &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    t.join();  </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
<p>源文件和makefile添加完成后，我们开始配置task.json用来管理任务</p>
<p>在vscode中按 <code>Ctrl+Shift+B</code>  <img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-config-task.jpg" alt="vscode-config-task"></p>
<p>然后点击</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-config-task1.jpg" alt="vscode-config-task1"></p>
<p>vscode会在工程目录下新建<code>.vscode</code> 文件夹，并声称 task.json文件。</p>
<p>将我配置好的task.json内容复制上去</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    // See https://go.microsoft.com/fwlink/?LinkId=733558</div><div class="line">    // for the documentation about the tasks.json format</div><div class="line">    "version": "2.0.0",</div><div class="line">    "tasks": [</div><div class="line">        &#123;</div><div class="line">            "taskName": "debug",</div><div class="line">            "type": "shell",</div><div class="line">            "command": "make ver=debug debug",</div><div class="line">            "suppressTaskName": true,</div><div class="line">            "group": "build",</div><div class="line">            "presentation": &#123;</div><div class="line">                "reveal": "always",</div><div class="line">                "panel": "shared"</div><div class="line">            &#125;,</div><div class="line">            "problemMatcher": [</div><div class="line">                &#123;</div><div class="line">                    "owner": "cpp",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "column": 3,</div><div class="line">                        "severity": 4,</div><div class="line">                        "message": 5</div><div class="line">                    &#125;</div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    "owner": "make",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "message": 3</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            "taskName": "remote debug",</div><div class="line">            "type": "shell",</div><div class="line">            "command": "./prepare_remote_debug.sh",</div><div class="line">            "suppressTaskName": true,</div><div class="line">            "group": "build",</div><div class="line">            "presentation": &#123;</div><div class="line">                "reveal": "always",</div><div class="line">                "focus": false,</div><div class="line">                "panel": "shared"</div><div class="line">            &#125;,</div><div class="line">            "problemMatcher": [</div><div class="line">                &#123;</div><div class="line">                    "owner": "cpp",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "column": 3,</div><div class="line">                        "severity": 4,</div><div class="line">                        "message": 5</div><div class="line">                    &#125;</div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    "owner": "make",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "message": 3</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            "taskName": "release",</div><div class="line">            "type": "shell",</div><div class="line">            "command": "make",</div><div class="line">            "suppressTaskName": true,</div><div class="line">            "group": "build",</div><div class="line">            "presentation": &#123;</div><div class="line">                "reveal": "always",</div><div class="line">                "focus": false,</div><div class="line">                "panel": "shared"</div><div class="line">            &#125;,</div><div class="line">            "problemMatcher": [</div><div class="line">                &#123;</div><div class="line">                    "owner": "cpp",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "column": 3,</div><div class="line">                        "severity": 4,</div><div class="line">                        "message": 5</div><div class="line">                    &#125;</div><div class="line">                &#125;,</div><div class="line">                &#123;</div><div class="line">                    "owner": "make",</div><div class="line">                    "fileLocation": [</div><div class="line">                        "relative",</div><div class="line">                        "$&#123;workspaceRoot&#125;"</div><div class="line">                    ],</div><div class="line">                    "pattern": &#123;</div><div class="line">                        "regexp": "^(.*):(\\d+):\\s+(.*)$",</div><div class="line">                        "file": 1,</div><div class="line">                        "line": 2,</div><div class="line">                        "message": 3</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            "taskName": "clean",</div><div class="line">            "type": "shell",</div><div class="line">            "command": "make clean",</div><div class="line">            "suppressTaskName": true,</div><div class="line">            "group": "build",</div><div class="line">            "presentation": &#123;</div><div class="line">                "reveal": "always",</div><div class="line">                "focus": false,</div><div class="line">                "panel": "shared"</div><div class="line">            &#125;,</div><div class="line">            "problemMatcher": []</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>vscode 的task 本质上是在后台执行一个command，我们利用配置task调用make 实现管理编译工程文件及其他任务，task的语法可以参考<a href="https://code.visualstudio.com/Docs/editor/tasks" target="_blank" rel="external">这里</a>。</p>
<p>现在，我们可以利用task来实现项目的编译。</p>
<p>在vscode中按 <code>Ctrl+P</code> 调出快速命令 输入 <code>task debug</code> 回车进行编译，控制台中输出：</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-task-debug.jpg" alt="vscode-task-debug"></p>
<p>此时make工具会执行 make ver=debug debug命令来对工程进行编译，编译结束后在文件夹下生成test.o 及 testapp_d文件。</p>
<p>同样，可以利用task执行make clean， vscode中 按 <code>Ctrl+P</code> 输入 task clean，回车执行清理。</p>
<p>现在可以说开发编译过程非常方便了，但是还可以更方便一点。</p>
<p>在标题栏中找到 File - Preferrences-Keyboard shortcuts 点击后打开Keyboard shortcuts页面，点击keybindings.json</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-keybinding.jpg" alt="vscode-keybinding"></p>
<p>点击后弹出</p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-keybinding1.jpg" alt="vscode-keybinding1"></p>
<p>在Keybindings.json中输入以下内容</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    &#123;</div><div class="line">    <span class="attr">"key"</span>: <span class="string">"F7"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"workbench.action.tasks.runTask"</span>,</div><div class="line">    <span class="attr">"args"</span>: <span class="string">"debug"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">    <span class="attr">"key"</span>: <span class="string">"ctrl+F7"</span>,</div><div class="line">    <span class="attr">"command"</span>: <span class="string">"workbench.action.tasks.runTask"</span>,</div><div class="line">    <span class="attr">"args"</span>: <span class="string">"remote debug"</span></div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>keybindings.json是定义快捷键的布局文件，这里我们添加了 <code>F7</code>和<code>Ctrl+F7</code> 分别执行 <code>task debug</code> 和 <code>task remote debug</code> ，debug任务实际上是执行带调试信息的<strong>编译任务</strong>并不是真正的debug。</p>
<p>好了现在可以关掉keybindings.json回到我们的工程中来，按下<code>F7</code> 可以看到工程现在可以自行编译了，是不是和visual studio一模一样？ </p>
<p><img src="/2017/07/24/Raspberry Pi 的C++交叉编译环境配置 (3)/vscode-F7.jpg" alt="vscode-F7"></p>
<p>由于我们现在是交叉编译，所以需要将执行文件传输到RPi上然后通过远程调试的方式来进行调试，这部分内容我们下节再讲。</p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/技术类/">技术类</a></div>

      
  <div class="tags">
<a href="/tags/RPi/">RPi</a><a href="/tags/Ubuntu/">Ubuntu</a><a href="/tags/C/">C++</a><a href="/tags/VSCODE/">VSCODE</a></div>

      
    </footer>
    
  </div>
  
</article></div>
  <footer id="footer" class="inner"><div class="social alignright">
  
  
  
    <a class="twitter" href="http://twitter.com/https://twitter.com/PuffingWorks" title="Twitter">Twitter</a>
  
  
    <a class="github" href="https://github.com/https://github.com/MiniSoda" title="GitHub">GitHub</a>
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>
  
  &copy; 2017 George Zheng
  
</p>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>
</body>
</html>